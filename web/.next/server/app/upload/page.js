(()=>{var e={};e.id=676,e.ids=[676],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6613:(e,t,l)=>{"use strict";l.r(t),l.d(t,{GlobalError:()=>a.a,__next_app__:()=>c,originalPathname:()=>p,pages:()=>u,routeModule:()=>m,tree:()=>d}),l(5219),l(9935),l(5866);var r=l(3191),n=l(8716),i=l(7922),a=l.n(i),s=l(5231),o={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>s[e]);l.d(t,o);let d=["",{children:["upload",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(l.bind(l,5219)),"/home/carlos/helion/web/app/upload/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(l.bind(l,9935)),"/home/carlos/helion/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(l.t.bind(l,5866,23)),"next/dist/client/components/not-found-error"]}],u=["/home/carlos/helion/web/app/upload/page.tsx"],p="/upload/page",c={require:l,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/upload/page",pathname:"/upload",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9736:(e,t,l)=>{Promise.resolve().then(l.bind(l,2216))},7327:(e,t,l)=>{"use strict";l.d(t,{Z:()=>i});var r=l(326);let n={marginBottom:"1rem",color:"#b91c1c"};function i({message:e,onRetry:t,retryLabel:l}){return(0,r.jsxs)("div",{role:"alert",style:n,children:[r.jsx("p",{style:{margin:0},children:e}),"function"==typeof t&&r.jsx("button",{type:"button",onClick:t,"aria-label":l??"Retry",style:{marginTop:"0.5rem"},children:"Retry"})]})}},2216:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>o});var r=l(326),n=l(7577),i=l(434),a=l(2809),s=l(7327);function o(){let[e,t]=(0,n.useState)(null),[l,o]=(0,n.useState)("idle"),[d,u]=(0,n.useState)(null),[p,c]=(0,n.useState)(null),[m,h]=(0,n.useState)(null),g=(0,n.useCallback)(e=>{t(e.target.files?.[0]??null),o("idle"),u(null),c(null),h(null)},[]),x=(0,n.useCallback)(async t=>{if(t.preventDefault(),!e)return;if(!e.name.toLowerCase().endsWith(".json")){o("error"),c("File must have a .json extension.");return}let l=new FormData;l.append("file",e),o("uploading"),u(null),c(null),h(null);try{let e=(0,a.Um)(),t=await e.uploadFindings(l);u(t),o("success")}catch(e){Array.isArray(e?.detail)&&e.detail.length>0?(h(e.detail),c(null)):(h(null),c((0,a.e$)(e))),o("error")}},[e]),b=!e||"uploading"===l;return(0,r.jsxs)("main",{style:{padding:"2rem",maxWidth:"32rem",margin:"0 auto"},children:[r.jsx("h1",{style:{fontSize:"1.25rem",marginBottom:"1rem"},children:"Upload findings (JSON)"}),(0,r.jsxs)("form",{onSubmit:x,children:[(0,r.jsxs)("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{htmlFor:"file-input",style:{display:"block",marginBottom:"0.5rem"},children:"File"}),r.jsx("input",{id:"file-input",type:"file",accept:".json",onChange:g,"aria-label":"Select JSON file"})]}),r.jsx("button",{type:"submit",disabled:b,"aria-busy":"uploading"===l,"aria-label":"uploading"===l?"Uploading":"Submit",children:"Submit"})]}),"error"===l&&null!==m&&m.length>0&&(0,r.jsxs)("div",{role:"alert",style:{marginTop:"1rem",marginBottom:"1rem",color:"#b91c1c"},children:[r.jsx("p",{style:{margin:"0 0 0.5rem 0"},children:"Validation errors:"}),r.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:m.map((e,t)=>(0,r.jsxs)("li",{style:{marginBottom:"0.25rem"},children:[e.loc?.length?`${e.loc.join(" → ")}: `:"",e.msg]},t))})]}),"error"===l&&null!==p&&""!==p&&null===m&&r.jsx(s.Z,{message:p}),(0,r.jsxs)("div",{role:"status","aria-live":"polite",style:{marginTop:"1rem",minHeight:"1.5em"},children:["idle"===l&&r.jsx("p",{style:{color:"#666"},children:"Select a JSON file and submit."}),"uploading"===l&&r.jsx("p",{children:"Uploading…"}),"success"===l&&null!==d&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:["Done. Accepted: ",d.accepted,d.ids&&d.ids.length>0?`. IDs: ${d.ids.length}`:""]}),r.jsx("p",{style:{marginTop:"0.5rem"},children:r.jsx(i.default,{href:"/results",style:{color:"#2563eb",textDecoration:"underline"},"aria-label":"View results",children:"View results"})})]})]})]})}},434:(e,t,l)=>{"use strict";l.d(t,{default:()=>n.a});var r=l(9404),n=l.n(r)},5219:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>r});let r=(0,l(8570).createProxy)(String.raw`/home/carlos/helion/web/app/upload/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var l=e=>t(t.s=e),r=t.X(0,[991,636],()=>l(6613));module.exports=r})();