(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[104],{9207:function(t,e,n){Promise.resolve().then(n.bind(n,3040))},1627:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(7437);let i={marginBottom:"1rem",color:"#b91c1c"};function o(t){let{message:e,onRetry:n,retryLabel:o}=t;return(0,r.jsxs)("div",{role:"alert",style:i,children:[(0,r.jsx)("p",{style:{margin:0},children:e}),"function"==typeof n&&(0,r.jsx)("button",{type:"button",onClick:n,"aria-label":null!=o?o:"Retry",style:{marginTop:"0.5rem"},children:"Retry"})]})}},3040:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return a}});var r=n(7437),i=n(2265),o=n(2818),s=n(1627);function a(){let[t,e]=(0,i.useState)(!0),[n,a]=(0,i.useState)(!1),[l,c]=(0,i.useState)("idle"),[u,p]=(0,i.useState)(null),[d,m]=(0,i.useState)(null),h=(0,i.useCallback)(t=>{e(t.target.checked)},[]),f=(0,i.useCallback)(t=>{a(t.target.checked)},[]),y=(0,i.useCallback)(async e=>{e.preventDefault(),c("submitting"),p(null),m(null);try{let e=(0,o.Um)(),r=await e.postJiraExport({use_db:t,use_reasoning:n});p(r),c("success")}catch(t){m((0,o.e$)(t)),c("error")}},[t,n]);return(0,r.jsxs)("main",{style:{padding:"2rem",maxWidth:"48rem",margin:"0 auto"},children:[(0,r.jsx)("h1",{style:{fontSize:"1.25rem",marginBottom:"1rem"},children:"Jira export"}),(0,r.jsxs)("form",{onSubmit:y,style:{marginBottom:"1.5rem"},children:[(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[(0,r.jsx)("input",{type:"checkbox",checked:t,onChange:h,"aria-label":"Use current clusters from database","aria-checked":t}),(0,r.jsx)("span",{children:"Use current clusters from database"})]}),(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[(0,r.jsx)("input",{type:"checkbox",checked:n,onChange:f,"aria-label":"Run reasoning before export","aria-checked":n}),(0,r.jsx)("span",{children:"Run reasoning before export"})]}),(0,r.jsx)("button",{type:"submit",disabled:"submitting"===l,"aria-busy":"submitting"===l,"aria-label":"submitting"===l?"Exporting to Jira":"Export to Jira",children:"submitting"===l?"Exportingâ€¦":"Export to Jira"})]}),"error"===l&&null!==d&&""!==d&&(0,r.jsx)(s.Z,{message:d}),"success"===l&&null!==u&&(0,r.jsxs)("div",{children:[u.epics&&Object.keys(u.epics).length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{style:{fontSize:"1rem",marginBottom:"0.5rem"},children:"Epics"}),(0,r.jsx)("ul",{style:{listStyle:"none",padding:0,margin:"0 0 1rem 0"},children:Object.entries(u.epics).map(t=>{let[e,n]=t;return(0,r.jsxs)("li",{children:[e,": ",n]},e)})})]}),u.issues&&u.issues.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{style:{fontSize:"1rem",marginBottom:"0.5rem"},children:"Issues"}),(0,r.jsx)("ul",{style:{listStyle:"none",padding:0,margin:0},children:u.issues.map(t=>(0,r.jsxs)("li",{style:{marginBottom:"0.25rem"},children:[t.key,": ",t.title," (",t.tier,")"]},t.key))})]}),u.errors&&u.errors.length>0&&(0,r.jsxs)("div",{style:{marginTop:"1rem",color:"#b91c1c"},children:[(0,r.jsx)("h2",{style:{fontSize:"1rem",marginBottom:"0.5rem"},children:"Errors"}),(0,r.jsx)("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:u.errors.map((t,e)=>(0,r.jsx)("li",{children:t},e))})]})]})]})}},2818:function(t,e,n){"use strict";n.d(e,{Um:function(){return c},e$:function(){return a}});var r=n(6023),i=n(257);let o="http://localhost:8000",s=function(){if("string"!=typeof i.env.NEXT_PUBLIC_API_URL)return o;let t=i.env.NEXT_PUBLIC_API_URL.trim();return t.length>0?t.replace(/\/+$/,""):o};function a(t){return 401===(t&&"object"==typeof t&&"status"in t&&"number"==typeof t.status?t.status:void 0)?"Unauthorized. Please log in.":t instanceof Error?t.message:"Network or request failed."}async function l(t,e,n){var r,i;let o="".concat(t.replace(/\/+$/,"")).concat(e),s=function(t){let e={};return t.token&&t.token.length>0&&(e.Authorization="Bearer ".concat(t.token)),t.contentType&&(e["Content-Type"]=t.contentType),e}({token:n.token,contentType:null!==(r=n.contentType)&&void 0!==r?r:n.body instanceof FormData?void 0:"application/json"}),a={method:n.method,headers:s};void 0!==n.body&&(a.body=n.body);let l=await fetch(o,a);if(!l.ok){let t,e=l.statusText;if((null!==(i=l.headers.get("content-type"))&&void 0!==i?i:"").includes("application/json"))try{let n=await l.json();"detail"in n&&void 0!==n.detail&&(t=n.detail,"string"==typeof n.detail?e=n.detail:Array.isArray(n.detail)&&(e=n.detail.map(t=>t&&"object"==typeof t&&"msg"in t?t.msg:String(t)).join("; ")))}catch(t){}let n=Error(e);throw n.status=l.status,n.detail=t,n}return l.json()}function c(){var t,e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=null!==(t=n.baseUrl)&&void 0!==t?t:s(),o=null!==(e=n.token)&&void 0!==e?e:(0,r.LP)();return{getHealth:()=>l(i,"/api/v1/health/",{method:"GET",token:o}),login:t=>l(i,"/api/v1/auth",{method:"POST",token:o,body:JSON.stringify(t),contentType:"application/json"}),listUsers:()=>l(i,"/api/v1/auth/users",{method:"GET",token:o}),uploadFindings(t){let e=t instanceof FormData;return l(i,"/api/v1/upload",{method:"POST",token:o,body:e?t:JSON.stringify(t),contentType:e?void 0:"application/json"})},getClusters:()=>l(i,"/api/v1/clusters",{method:"GET",token:o}),postReasoning:t=>l(i,"/api/v1/reasoning",{method:"POST",token:o,body:JSON.stringify(t),contentType:"application/json"}),postExploitability:t=>l(i,"/api/v1/exploitability",{method:"POST",token:o,body:JSON.stringify(t),contentType:"application/json"}),postTickets:t=>l(i,"/api/v1/tickets",{method:"POST",token:o,body:JSON.stringify(t),contentType:"application/json"}),postJiraExport:t=>l(i,"/api/v1/jira/export",{method:"POST",token:o,body:JSON.stringify(t),contentType:"application/json"})}}},6023:function(t,e,n){"use strict";n.d(e,{LP:function(){return i},o4:function(){return o},qz:function(){return s}});let r="helion_access_token";function i(){try{let t=localStorage.getItem(r),e="string"==typeof t?t.trim():"";return e.length>0?e:void 0}catch(t){return}}function o(t){if("string"!=typeof t)return;let e=t.trim();if(0!==e.length)try{let t=e.length>4096?e.slice(0,4096):e;localStorage.setItem(r,t)}catch(t){}}function s(){try{localStorage.removeItem(r)}catch(t){}}},257:function(t,e,n){"use strict";var r,i;t.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(i=n.g.process)?void 0:i.env)?n.g.process:n(4227)},4227:function(t){!function(){var e={229:function(t){var e,n,r,i=t.exports={};function o(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch(t){e=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var l=[],c=!1,u=-1;function p(){c&&r&&(c=!1,r.length?l=r.concat(l):u=-1,l.length&&d())}function d(){if(!c){var t=a(p);c=!0;for(var e=l.length;e;){for(r=l,l=[];++u<e;)r&&r[u].run();u=-1,e=l.length}r=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function h(){}i.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new m(t,e)),1!==l.length||c||a(d)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(t){return[]},i.binding=function(t){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var o=n[t]={exports:{}},s=!0;try{e[t](o,o.exports,r),s=!1}finally{s&&delete n[t]}return o.exports}r.ab="//";var i=r(229);t.exports=i}()}},function(t){t.O(0,[971,117,744],function(){return t(t.s=9207)}),_N_E=t.O()}]);